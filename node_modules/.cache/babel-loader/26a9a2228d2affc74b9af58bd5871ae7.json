{"ast":null,"code":"import _slicedToArray from\"/Users/stoyannikolov/Desktop/softuni-react-exam/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from\"react\";import{storage,auth}from\"../fire\";import\"./img.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImgUpload=function ImgUpload(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),url=_useState4[0],setUrl=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),progress=_useState6[0],setProgress=_useState6[1];var handleChange=function handleChange(e){if(e.target.files[0]){setImage(e.target.files[0]);}};var handleUpload=function handleUpload(){var uploadTask=storage.ref(\"images/\".concat(image.name)).put(image);uploadTask.on(\"state_changed\",function(snapshot){var progress=Math.round(snapshot.bytesTransferred/snapshot.totalBytes*100);setProgress(progress);},function(error){console.log(error);},function(){storage.ref(\"images\").child(image.name).getDownloadURL().then(function(url){setUrl(url);var user=auth.currentUser;user.updateProfile({photoURL:url}).then(function(){// Update successful.\nconsole.log(user);}).catch(function(error){// An error happened.\nconsole.log(error);});});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h1Img\",children:\"Image upload\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{className:\"avatar-preview\",src:url,alt:\"firebase-image\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,children:\"Upload\"}),/*#__PURE__*/_jsx(\"progress\",{value:progress,max:\"100\"})]});};export default ImgUpload;","map":{"version":3,"sources":["/Users/stoyannikolov/Desktop/softuni-react-exam/src/imgUpload/ImgUpload.js"],"names":["useState","storage","auth","ImgUpload","image","setImage","url","setUrl","progress","setProgress","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","user","currentUser","updateProfile","photoURL","catch"],"mappings":"sKAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,OAAT,CAAkBC,IAAlB,KAA8B,SAA9B,CACA,MAAO,WAAP,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,eACIH,QAAQ,CAAC,IAAD,CADZ,wCACfI,KADe,eACRC,QADQ,8BAEAL,QAAQ,CAAC,EAAD,CAFR,yCAEfM,GAFe,eAEVC,MAFU,8BAGUP,QAAQ,CAAC,CAAD,CAHlB,yCAGfQ,QAHe,eAGLC,WAHK,eAMtB,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1B,GAAIA,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAJ,CAAuB,CACrBR,QAAQ,CAACM,CAAC,CAACC,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAR,CACD,CACF,CAJD,CAKA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzB,GAAMC,CAAAA,UAAU,CAAGd,OAAO,CAACe,GAAR,kBAAsBZ,KAAK,CAACa,IAA5B,GAAoCC,GAApC,CAAwCd,KAAxC,CAAnB,CACAW,UAAU,CAACI,EAAX,CACE,eADF,CAEE,SAACC,QAAD,CAAc,CACZ,GAAMZ,CAAAA,QAAQ,CAAGa,IAAI,CAACC,KAAL,CACdF,QAAQ,CAACG,gBAAT,CAA4BH,QAAQ,CAACI,UAAtC,CAAoD,GADrC,CAAjB,CAGAf,WAAW,CAACD,QAAD,CAAX,CACD,CAPH,CAQE,SAACiB,KAAD,CAAW,CACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACD,CAVH,CAWE,UAAM,CACJxB,OAAO,CACJe,GADH,CACO,QADP,EAEGY,KAFH,CAESxB,KAAK,CAACa,IAFf,EAGGY,cAHH,GAIGC,IAJH,CAIQ,SAACxB,GAAD,CAAS,CACbC,MAAM,CAACD,GAAD,CAAN,CACA,GAAIyB,CAAAA,IAAI,CAAG7B,IAAI,CAAC8B,WAAhB,CACAD,IAAI,CAACE,aAAL,CAAmB,CACfC,QAAQ,CAAE5B,GADK,CAAnB,EAGCwB,IAHD,CAGM,UAAW,CACb;AACAJ,OAAO,CAACC,GAAR,CAAYI,IAAZ,EACH,CAND,EAOCI,KAPD,CAOO,SAASV,KAAT,CAAgB,CACnB;AACAC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,CAVD,EAYD,CAnBH,EAoBD,CAhCH,EAkCD,CApCD,CAsCA,mBACE,aAAK,SAAS,CAAC,WAAf,wBACI,WAAI,SAAS,CAAC,OAAd,0BADJ,cAEI,aAFJ,cAGI,YAAK,SAAS,CAAC,gBAAf,CAAgC,GAAG,CAAEnB,GAArC,CAA0C,GAAG,CAAC,gBAA9C,EAHJ,cAII,aAJJ,cAKI,cAAO,IAAI,CAAC,MAAZ,CAAmB,QAAQ,CAAEI,YAA7B,EALJ,cAMI,eAAQ,OAAO,CAAEI,YAAjB,oBANJ,cAOI,iBAAU,KAAK,CAAEN,QAAjB,CAA2B,GAAG,CAAC,KAA/B,EAPJ,GADF,CAYD,CA7DD,CA+DA,cAAeL,CAAAA,SAAf","sourcesContent":["import { useState } from \"react\";\nimport { storage, auth } from \"../fire\";\nimport \"./img.css\"\n\nconst ImgUpload = () => {\n  const [image, setImage] = useState(null);\n  const [url, setUrl] = useState(\"\");\n  const [progress, setProgress] = useState(0);\n  \n\n  const handleChange = (e) => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        const progress = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        setProgress(progress);\n      },\n      (error) => {\n        console.log(error);\n      },\n      () => {\n        storage\n          .ref(\"images\")\n          .child(image.name)\n          .getDownloadURL()\n          .then((url) => {\n            setUrl(url);\n            var user = auth.currentUser;\n            user.updateProfile({\n                photoURL: url\n            })\n            .then(function() {\n                // Update successful.\n                console.log(user);\n            })\n            .catch(function(error) {\n                // An error happened.\n                console.log(error);\n            });\n\n          });\n      }\n    );\n  };\n\n  return (\n    <div className=\"container\">\n        <h1 className=\"h1Img\">Image upload</h1>\n        <br />\n        <img className=\"avatar-preview\" src={url} alt=\"firebase-image\" />\n        <br />\n        <input type=\"file\" onChange={handleChange} />\n        <button onClick={handleUpload}>Upload</button>\n        <progress value={progress} max=\"100\" />\n    </div>\n    \n  );\n};\n\nexport default ImgUpload;\n"]},"metadata":{},"sourceType":"module"}