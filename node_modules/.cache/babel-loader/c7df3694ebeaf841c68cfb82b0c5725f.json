{"ast":null,"code":"var _jsxFileName = \"/Users/stoyannikolov/Desktop/softuni-react-exam/src/imgUpload/ImgUpload.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { storage, auth } from \"../fire\";\nimport \"./img.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ImgUpload = () => {\n  _s();\n\n  const [image, setImage] = useState(null);\n  const [url, setUrl] = useState(\"\");\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\"state_changed\", snapshot => {\n      const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n      setProgress(progress);\n    }, error => {\n      console.log(error);\n    }, () => {\n      storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n        setUrl(url);\n        var user = auth.currentUser;\n        user.updateProfile({\n          photoURL: url\n        }).then(function () {\n          // Update successful.\n          console.log(user);\n        }).catch(function (error) {\n          // An error happened.\n          console.log(error);\n        });\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"containerImg\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cont\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"h1Img\",\n        children: \"Image upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"avatar-preview\",\n        src: url || \"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png\",\n        alt: \"firebase-image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        className: \"imgSelector\",\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        onClick: handleUpload,\n        children: \"Upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"progress\", {\n        value: progress,\n        max: \"100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ImgUpload, \"ABzJnqDIQywtLOVTqmaAH+6pAbc=\");\n\n_c = ImgUpload;\nexport default ImgUpload;\n\nvar _c;\n\n$RefreshReg$(_c, \"ImgUpload\");","map":{"version":3,"sources":["/Users/stoyannikolov/Desktop/softuni-react-exam/src/imgUpload/ImgUpload.js"],"names":["useState","storage","auth","ImgUpload","image","setImage","url","setUrl","progress","setProgress","handleChange","e","target","files","handleUpload","uploadTask","ref","name","put","on","snapshot","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","user","currentUser","updateProfile","photoURL","catch"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { storage, auth } from \"../fire\";\nimport \"./img.css\";\n\nconst ImgUpload = () => {\n  const [image, setImage] = useState(null);\n  const [url, setUrl] = useState(\"\");\n  const [progress, setProgress] = useState(0);\n\n  const handleChange = (e) => {\n    if (e.target.files[0]) {\n      setImage(e.target.files[0]);\n    }\n  };\n  const handleUpload = () => {\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\n    uploadTask.on(\n      \"state_changed\",\n      (snapshot) => {\n        const progress = Math.round(\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\n        );\n        setProgress(progress);\n      },\n      (error) => {\n        console.log(error);\n      },\n      () => {\n        storage\n          .ref(\"images\")\n          .child(image.name)\n          .getDownloadURL()\n          .then((url) => {\n            setUrl(url);\n            var user = auth.currentUser;\n            user\n              .updateProfile({\n                photoURL: url,\n              })\n              .then(function () {\n                // Update successful.\n                console.log(user);\n              })\n              .catch(function (error) {\n                // An error happened.\n                console.log(error);\n              });\n          });\n      }\n    );\n  };\n\n  return (\n    <div className=\"containerImg\">\n      <div className=\"cont\">\n        <h1 className=\"h1Img\">Image upload</h1>\n        <br />\n        <img className=\"avatar-preview\" src={url || \"https://cdn.pixabay.com/photo/2016/08/08/09/17/avatar-1577909_1280.png\"} alt=\"firebase-image\" />\n        <br />\n        <input type=\"file\" className=\"imgSelector\" onChange={handleChange} />\n        <button className=\"button\" onClick={handleUpload}>Upload</button>\n        <progress value={progress} max=\"100\" />\n      </div>\n    </div>\n  );\n};\n\nexport default ImgUpload;\n"]},"metadata":{},"sourceType":"module"}